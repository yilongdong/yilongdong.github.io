<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>clang 编译链接</title>
      <link href="/2022/11/03/clang-bian-yi-lian-jie/"/>
      <url>/2022/11/03/clang-bian-yi-lian-jie/</url>
      
        <content type="html"><![CDATA[<p>clang编译与搜索路径</p><span id="more"></span><!-- markdownlint-disable MD041 MD002--><p>如果在mac上自己编译了clang,llvm然后安装了，可能会出现找不到文件的错误。</p><p>可以在<code>~/.zshrc</code>中加入</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">alias</span> clang+<span class="token operator">+=</span><span class="token string">'clang++ -isysroot `xcrun --show-sdk-path` '</span><span class="token builtin class-name">alias</span> <span class="token assign-left variable">clang</span><span class="token operator">=</span><span class="token string">'clang -isysroot `xcrun --show-sdk-path` '</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xx.c <span class="token comment"># 源文件</span>xx.i <span class="token comment"># 预处理后文件</span>xx.s <span class="token comment"># 汇编代码</span>xx.o <span class="token comment"># 目标文件，引用的其他文件的函数地址尚未定义</span>xx.out <span class="token comment"># 可执行文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>编译预处理</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">clang <span class="token parameter variable">-E</span> xx.c <span class="token comment"># 进行预处理</span>cpp xx.c <span class="token comment"># 编译预处理命令程序是cpp，也可以直接使用cpp进行预处理</span>clang <span class="token parameter variable">-E</span> <span class="token parameter variable">-c</span> xx.i xx.c <span class="token comment"># 保存到文件</span>clang <span class="token parameter variable">-o</span> xx.i xx.c <span class="token comment"># 保存到文件</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>生成汇编</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">clang <span class="token parameter variable">-S</span> xx.cclang <span class="token parameter variable">-S</span> <span class="token parameter variable">-o</span> xx.s xx.c<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>生成.o文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">clang <span class="token parameter variable">-c</span> xx.c<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>保存中间步骤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">clang -save-temps xx.c<span class="token comment"># 会生成xx.i xx.s xx.o a.out</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="搜索路径设置"><a href="#搜索路径设置" class="headerlink" title="搜索路径设置"></a>搜索路径设置</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;xxx&gt;</span> <span class="token comment">// 只在默认的系统包含路径搜索头文件</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"xxx"</span> <span class="token comment">// 现在当前目录搜索头文件</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">clang <span class="token parameter variable">-Ixxx</span> <span class="token comment"># 增加头文件搜索目录</span>clang <span class="token parameter variable">-include</span> /xxx/xx.h <span class="token comment"># 增加头文件</span>clang <span class="token parameter variable">-Lxxx</span> <span class="token comment"># 增加库搜索目录</span>clang <span class="token parameter variable">-lxx</span> <span class="token comment"># 增加库文件  libxx.后缀</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="常用编译选项"><a href="#常用编译选项" class="headerlink" title="常用编译选项"></a>常用编译选项</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token parameter variable">-Wall</span> <span class="token builtin class-name">:</span> 显示所有常用的编译警告信息。<span class="token parameter variable">-W</span> <span class="token builtin class-name">:</span> 显示更多的常用编译警告，如：变量未使用、一些逻辑错误。<span class="token parameter variable">-Werror</span> <span class="token builtin class-name">:</span> 将警告升级为错误<span class="token parameter variable">-fPIC</span> <span class="token builtin class-name">:</span> 共享库应创建位置无关代码<span class="token parameter variable">-v</span> <span class="token builtin class-name">:</span> 打印编译一个文件的所有步骤<span class="token parameter variable">-D</span> <span class="token builtin class-name">:</span> -D<span class="token operator">&lt;</span>macroname<span class="token operator">&gt;=</span><span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> 定义宏<span class="token parameter variable">-U</span> <span class="token builtin class-name">:</span> undef@xx <span class="token builtin class-name">:</span> 从文件xx中读取参数<span class="token parameter variable">-std</span> <span class="token builtin class-name">:</span> <span class="token parameter variable">-std</span><span class="token operator">=</span>c++11/c++14/c++17/c90/c89/<span class="token parameter variable">-static</span> <span class="token parameter variable">-shared</span>-ccc-print-phases <span class="token builtin class-name">:</span> 打印编译阶段-L<span class="token variable"><span class="token variable">$(</span>brew <span class="token parameter variable">--prefix</span> gperftools<span class="token variable">)</span></span>/lib<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html">其他参数</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> clang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CMake Cookbook 第二章: 检测环境</title>
      <link href="/2022/10/31/cmake-cookbook-di-er-zhang-jian-ce-huan-jing/"/>
      <url>/2022/10/31/cmake-cookbook-di-er-zhang-jian-ce-huan-jing/</url>
      
        <content type="html"><![CDATA[<h1 id="CMake-Cookbook-第二章-检测环境"><a href="#CMake-Cookbook-第二章-检测环境" class="headerlink" title="CMake Cookbook 第二章: 检测环境"></a>CMake Cookbook 第二章: 检测环境</h1><span id="more"></span><!-- markdownlint-disable MD041 MD002--><p>本文是对 <a href="https://github.com/xiaoweiChen/CMake-Cookbook/blob/master/SUMMARY.md">cmake cookbook中文翻译</a>的学习笔记记录，建议看原文。</p><h2 id="检测操作系统环境"><a href="#检测操作系统环境" class="headerlink" title="检测操作系统环境"></a>检测操作系统环境</h2><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_SYSTEM_NAME</span> <span class="token operator">STREQUAL</span> <span class="token string">"Linux"</span><span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Configuring on/for Linux"</span><span class="token punctuation">)</span><span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">CMAKE_SYSTEM_NAME</span> <span class="token operator">STREQUAL</span> <span class="token string">"Darwin"</span><span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Configuring on/for macOS"</span><span class="token punctuation">)</span><span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">CMAKE_SYSTEM_NAME</span> <span class="token operator">STREQUAL</span> <span class="token string">"Windows"</span><span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Configuring on/for Windows"</span><span class="token punctuation">)</span><span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">CMAKE_SYSTEM_NAME</span> <span class="token operator">STREQUAL</span> <span class="token string">"AIX"</span><span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Configuring on/for IBM AIX"</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Configuring on/for <span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">CMAKE_SYSTEM_NAME</span><span class="token punctuation">}</span></span>"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="处理平台和编译器相关代码"><a href="#处理平台和编译器相关代码" class="headerlink" title="处理平台和编译器相关代码"></a>处理平台和编译器相关代码</h2><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstdlib&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>std<span class="token double-colon punctuation">::</span>string <span class="token function">say_hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">IS_WINDOWS</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello from Windows!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">IS_LINUX</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello from Linux!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">IS_MACOS</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello from macOS!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello from an unknown system!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>  <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">IS_INTEL_CXX_COMPILER</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello Intel compiler!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">IS_GNU_CXX_COMPILER</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello GNU compiler!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">IS_PGI_CXX_COMPILER</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello PGI compiler!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">elif</span> <span class="token expression">IS_XL_CXX_COMPILER</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello XL compiler!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>  <span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello unknown compiler - have we met before?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">say_hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"compiler name is "</span> COMPILER_NAME <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>  <span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span> FATAL_ERROR<span class="token punctuation">)</span><span class="token keyword">project</span><span class="token punctuation">(</span>recipe-<span class="token number">02</span> LANGUAGES CXX<span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>hello-world hello-world.cpp<span class="token punctuation">)</span><span class="token comment"># 处理平台相关代码</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_SYSTEM_NAME</span> <span class="token operator">STREQUAL</span> <span class="token string">"Linux"</span><span class="token punctuation">)</span>  <span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>hello-world <span class="token namespace">PUBLIC</span> <span class="token string">"IS_LINUX"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_SYSTEM_NAME</span> <span class="token operator">STREQUAL</span> <span class="token string">"Darwin"</span><span class="token punctuation">)</span>  <span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>hello-world <span class="token namespace">PUBLIC</span> <span class="token string">"IS_MACOS"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_SYSTEM_NAME</span> <span class="token operator">STREQUAL</span> <span class="token string">"Windows"</span><span class="token punctuation">)</span>  <span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>hello-world <span class="token namespace">PUBLIC</span> <span class="token string">"IS_WINDOWS"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 处理编译器相关代码</span><span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>hello-world <span class="token namespace">PUBLIC</span> <span class="token string">"COMPILER_NAME=\"<span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">CMAKE_CXX_COMPILER_ID</span><span class="token punctuation">}</span></span>\""</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_COMPILER_ID</span> <span class="token operator">MATCHES</span> Intel<span class="token punctuation">)</span>  <span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>hello-world <span class="token namespace">PUBLIC</span> <span class="token string">"IS_INTEL_CXX_COMPILER"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_COMPILER_ID</span> <span class="token operator">MATCHES</span> GNU<span class="token punctuation">)</span>  <span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>hello-world <span class="token namespace">PUBLIC</span> <span class="token string">"IS_GNU_CXX_COMPILER"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_COMPILER_ID</span> <span class="token operator">MATCHES</span> PGI<span class="token punctuation">)</span>  <span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>hello-world <span class="token namespace">PUBLIC</span> <span class="token string">"IS_PGI_CXX_COMPILER"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_COMPILER_ID</span> <span class="token operator">MATCHES</span> XL<span class="token punctuation">)</span>  <span class="token keyword">target_compile_definitions</span><span class="token punctuation">(</span>hello-world <span class="token namespace">PUBLIC</span> <span class="token string">"IS_XL_CXX_COMPILER"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="检测处理器体系结构与指令集"><a href="#检测处理器体系结构与指令集" class="headerlink" title="检测处理器体系结构与指令集"></a>检测处理器体系结构与指令集</h2><p>暂时用不到</p><p><a href="https://github.com/xiaoweiChen/CMake-Cookbook/blob/master/content/chapter2/2.4-chinese.md">需要可以点击查看</a></p><h2 id="为Eigen库使能向量化"><a href="#为Eigen库使能向量化" class="headerlink" title="为Eigen库使能向量化"></a>为Eigen库使能向量化</h2><p>暂时用不到</p><p><a href="https://github.com/xiaoweiChen/CMake-Cookbook/blob/master/content/chapter2/2.6-chinese.md">需要可以点击查看</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CMake </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CMake Cookbook 第一章：从可执行文件到库</title>
      <link href="/2022/10/31/cmake-cookbook-di-yi-zhang-cong-ke-zhi-xing-wen-jian-dao-ku/"/>
      <url>/2022/10/31/cmake-cookbook-di-yi-zhang-cong-ke-zhi-xing-wen-jian-dao-ku/</url>
      
        <content type="html"><![CDATA[<p>CMake Cookbook 第一章：从可执行文件到库</p><span id="more"></span><!-- markdownlint-disable MD041 MD002--><p>本文是对 <a href="https://github.com/xiaoweiChen/CMake-Cookbook/blob/master/SUMMARY.md">cmake cookbook中文翻译</a>的学习笔记记录，建议看原文。</p><p>CMake是一个构建系统生成器。将描述构建系统(如：Unix Makefile、Ninja、Visual Studio等)应当如何操作才能编译代码。</p><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">cmake_minimum_required</span><span class="token punctuation">(</span><span class="token property">VERSION</span> <span class="token number">3.5</span> FATAL_ERROR<span class="token punctuation">)</span><span class="token keyword">project</span><span class="token punctuation">(</span>recipe-<span class="token number">01</span> LANGUAGES C CXX<span class="token punctuation">)</span> <span class="token comment"># 可以设置语言</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="切换生成器"><a href="#切换生成器" class="headerlink" title="切换生成器"></a>切换生成器</h2><p>CMake语言不区分大小写，但是参数区分</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> build<span class="token builtin class-name">cd</span> buildcmake <span class="token parameter variable">-G</span> Ninja <span class="token punctuation">..</span> <span class="token comment"># -G切换生成器</span><span class="token comment"># cmake -H. -Bbuild</span><span class="token comment"># -H.代表在当前目录搜索根CMakeLists.txtx文件，</span><span class="token comment"># -Bbuild表示在名为build的目录下生成所有文件</span>cmake <span class="token parameter variable">--build</span> <span class="token builtin class-name">.</span> <span class="token comment"># 编译</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="静态库与动态库"><a href="#静态库与动态库" class="headerlink" title="静态库与动态库"></a>静态库与动态库</h2><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">add_library</span><span class="token punctuation">(</span><span class="token punctuation">${</span>libname_static<span class="token punctuation">}</span> <span class="token namespace">STATIC</span> xxx.h xxx.cpp<span class="token punctuation">)</span><span class="token keyword">add_library</span><span class="token punctuation">(</span><span class="token punctuation">${</span>libname_shared<span class="token punctuation">}</span> <span class="token namespace">SHARED</span> xxx.h xxx.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span><span class="token punctuation">${</span>exename<span class="token punctuation">}</span> <span class="token punctuation">${</span>libname_static<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span><span class="token punctuation">${</span>exename<span class="token punctuation">}</span> <span class="token punctuation">${</span>libname_shared<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://crascit.com/2016/01/31/enhanced-source-file-handling-with-target_sources/">target_sources介绍</a></p><p><code>target_include_directories</code></p><h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">set</span><span class="token punctuation">(</span>USE_LIBRARY <span class="token boolean">OFF</span><span class="token punctuation">)</span> <span class="token comment"># 硬编码 </span><span class="token comment"># 1, ON, YES, true, Y,非0数，为true</span><span class="token comment"># 0, OFF, NO, false, N, IGNORE, NOTFOUND, 空字符串，为false</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Compile source into a library? <span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">USE_LIBRARY</span><span class="token punctuation">}</span></span>"</span><span class="token punctuation">)</span><span class="token keyword">list</span><span class="token punctuation">(</span>APPEND _sources Message.hpp Message.cpp<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span>USE_LIBRARY<span class="token punctuation">)</span><span class="token keyword">add_library</span><span class="token punctuation">(</span>message <span class="token punctuation">${</span>_sources<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>hello-world hello-world.cpp<span class="token punctuation">)</span><span class="token keyword">target_link_libraries</span><span class="token punctuation">(</span>hello-world message<span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">(</span>USE_LIBRARY<span class="token punctuation">)</span><span class="token keyword">add_executable</span><span class="token punctuation">(</span>hello-world hello-world.cpp <span class="token punctuation">${</span>_sources<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span>USE_LIBRARY<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>局部变量可以在名称前加下划线</p><h2 id="cmake-选项-option"><a href="#cmake-选项-option" class="headerlink" title="cmake 选项 option"></a>cmake 选项 option</h2><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">include</span><span class="token punctuation">(</span>CMakeDependentOption<span class="token punctuation">)</span><span class="token comment"># cmake可以通过包含模块扩展语法和功能</span><span class="token comment"># cmake --help-module CMakeDependentOption 可以查看手册</span><span class="token keyword">option</span><span class="token punctuation">(</span>USE_LIBRARY <span class="token string">"Compile source into a library"</span> <span class="token boolean">OFF</span><span class="token punctuation">)</span><span class="token comment"># 使用方式 option(变量名 帮助字符串 默认值)</span><span class="token comment"># cmake -H. -Bbuild -D USE_LIBRARY=ON 可以开启选项</span><span class="token comment"># 有依赖关系到选项</span><span class="token function">cmake_dependent_option</span><span class="token punctuation">(</span>MAKE_STATIC_LIBRARY <span class="token string">"Compile sources into a static library"</span> <span class="token boolean">OFF</span><span class="token string">"USE_LIBRARY"</span> <span class="token boolean">ON</span><span class="token punctuation">)</span><span class="token function">cmake_dependent_option</span><span class="token punctuation">(</span>MAKE_SHARED_LIBRARY <span class="token string">"Compile sources into a shared library"</span> <span class="token boolean">ON</span><span class="token string">"USE_LIBRARY"</span> <span class="token boolean">ON</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="指定编译器"><a href="#指定编译器" class="headerlink" title="指定编译器"></a>指定编译器</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cmake -H. <span class="token parameter variable">-Bbuild</span> <span class="token parameter variable">-D</span> <span class="token assign-left variable">CMAKE_CXX_COMPILER</span><span class="token operator">=</span>clang++<span class="token comment"># 指定编译器</span>cmake --system-information information.txt<span class="token comment"># 可用的编译器和编译器标志</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="切换构建类型"><a href="#切换构建类型" class="headerlink" title="切换构建类型"></a>切换构建类型</h2><p>CMake可以配置构建类型，例如：Debug、Release等。配置时，可以为Debug或Release构建设置相关的选项或属性，例如：编译器和链接器标志。控制生成构建系统使用的配置变量是<code>CMAKE_BUILD_TYPE</code>。该变量默认为空，可选值如下：</p><p>Debug, Release<br>RelWithDebInfo：用于构建较少的优化库或可执行文件，包含调试符号。<br>MinSizeRel：用于不增加目标代码大小的优化方式来构建库或可执行文件。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cmake -H. <span class="token parameter variable">-Bbuild</span> <span class="token parameter variable">-D</span> <span class="token assign-left variable">CMAKE_BUILD_TYPE</span><span class="token operator">=</span>Debug<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">NOT</span> <span class="token variable">CMAKE_BUILD_TYPE</span><span class="token punctuation">)</span> <span class="token comment"># 便于命令行覆盖</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token variable">CMAKE_BUILD_TYPE</span> Release <span class="token variable">CACHE</span> STRING <span class="token string">"Build type"</span> FORCE<span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Build type: <span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">CMAKE_BUILD_TYPE</span><span class="token punctuation">}</span></span>"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>为Release版和Debug版单独创建构建目录会比较方便。</p><h2 id="设置编译选项"><a href="#设置编译选项" class="headerlink" title="设置编译选项"></a>设置编译选项</h2><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">list</span><span class="token punctuation">(</span>APPEND flags <span class="token string">"-fPIC"</span> <span class="token string">"-Wall"</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">NOT</span> <span class="token variable">WIN32</span><span class="token punctuation">)</span>  <span class="token keyword">list</span><span class="token punctuation">(</span>APPEND flags <span class="token string">"-Wextra"</span> <span class="token string">"-Wpedantic"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">target_compile_options</span><span class="token punctuation">(</span>testlib  <span class="token namespace">PRIVATE</span>    <span class="token punctuation">${</span>flags<span class="token punctuation">}</span>  <span class="token punctuation">)</span><span class="token comment"># PRIVATE，编译选项会应用于给定的目标，不会传递给与目标相关的目标</span><span class="token comment"># INTERFACE，给定的编译选项将只应用于指定目标，并传递给与目标相关的目标。</span><span class="token comment"># PUBLIC，编译选项将应用于指定目标和使用它的目标。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cmake <span class="token parameter variable">--build</span> <span class="token builtin class-name">.</span> -- <span class="token assign-left variable">VERBOSE</span><span class="token operator">=</span><span class="token number">1</span><span class="token comment"># 设置VERBOSE可以看到详细的编译参数和过程</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">set</span><span class="token punctuation">(</span>COMPILER_FLAGS<span class="token punctuation">)</span><span class="token keyword">set</span><span class="token punctuation">(</span>COMPILER_FLAGS_DEBUG<span class="token punctuation">)</span><span class="token keyword">set</span><span class="token punctuation">(</span>COMPILER_FLAGS_RELEASE<span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_COMPILER_ID</span> <span class="token operator">MATCHES</span> GNU<span class="token punctuation">)</span>  <span class="token keyword">list</span><span class="token punctuation">(</span>APPEND CXX_FLAGS <span class="token string">"-fno-rtti"</span> <span class="token string">"-fno-exceptions"</span><span class="token punctuation">)</span>  <span class="token keyword">list</span><span class="token punctuation">(</span>APPEND CXX_FLAGS_DEBUG <span class="token string">"-Wsuggest-final-types"</span> <span class="token string">"-Wsuggest-final-methods"</span> <span class="token string">"-Wsuggest-override"</span><span class="token punctuation">)</span>  <span class="token keyword">list</span><span class="token punctuation">(</span>APPEND CXX_FLAGS_RELEASE <span class="token string">"-O3"</span> <span class="token string">"-Wno-unused"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">CMAKE_CXX_COMPILER_ID</span> <span class="token operator">MATCHES</span> Clang<span class="token punctuation">)</span>  <span class="token keyword">list</span><span class="token punctuation">(</span>APPEND CXX_FLAGS <span class="token string">"-fno-rtti"</span> <span class="token string">"-fno-exceptions"</span> <span class="token string">"-Qunused-arguments"</span> <span class="token string">"-fcolor-diagnostics"</span><span class="token punctuation">)</span>  <span class="token keyword">list</span><span class="token punctuation">(</span>APPEND CXX_FLAGS_DEBUG <span class="token string">"-Wdocumentation"</span><span class="token punctuation">)</span>  <span class="token keyword">list</span><span class="token punctuation">(</span>APPEND CXX_FLAGS_RELEASE <span class="token string">"-O3"</span> <span class="token string">"-Wno-unused"</span><span class="token punctuation">)</span><span class="token keyword">endif</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">target_compile_option</span><span class="token punctuation">(</span>compute-areas  <span class="token namespace">PRIVATE</span>    <span class="token punctuation">${</span>CXX_FLAGS<span class="token punctuation">}</span>    <span class="token string">"$&lt;$&lt;CONFIG:Debug&gt;:<span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">CXX_FLAGS_DEBUG</span><span class="token punctuation">}</span></span>&gt;"</span>    <span class="token string">"$&lt;$&lt;CONFIG:Release&gt;:<span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">CXX_FLAGS_RELEASE</span><span class="token punctuation">}</span></span>&gt;"</span>  <span class="token punctuation">)</span><span class="token comment"># 为不同配置使用不同flags</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="设置语言标准"><a href="#设置语言标准" class="headerlink" title="设置语言标准"></a>设置语言标准</h2><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">set_target_properties</span><span class="token punctuation">(</span>animal-farm  <span class="token namespace">PROPERTIES</span>    <span class="token property">CXX_STANDARD</span> <span class="token number">14</span>    <span class="token property">CXX_EXTENSIONS</span> <span class="token boolean">OFF</span> <span class="token comment"># 只启用ISO C++标准的编译器标志，而不使用特定编译器的扩展。</span>    <span class="token property">CXX_STANDARD_REQUIRED</span> <span class="token boolean">ON</span> <span class="token comment"># 如果这个版本不可用，CMake将停止配置并出现错误</span>  <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><pre class="line-numbers language-cmake" data-language="cmake"><code class="language-cmake"><span class="token keyword">list</span><span class="token punctuation">(</span>  APPEND sources_with_lower_optimization    geometry_circle.cpp    geometry_rhombus.cpp  <span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Setting source properties using IN LISTS syntax:"</span><span class="token punctuation">)</span><span class="token keyword">foreach</span><span class="token punctuation">(</span>_source IN LISTS sources_with_lower_optimization<span class="token punctuation">)</span>  <span class="token keyword">set_source_files_properties</span><span class="token punctuation">(</span><span class="token punctuation">${</span>_source<span class="token punctuation">}</span> <span class="token namespace">PROPERTIES</span> <span class="token property">COMPILE_FLAGS</span> -O2<span class="token punctuation">)</span>  <span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Appending -O2 flag for <span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">_source</span><span class="token punctuation">}</span></span>"</span><span class="token punctuation">)</span><span class="token keyword">endforeach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Querying sources properties using plain syntax:"</span><span class="token punctuation">)</span><span class="token keyword">foreach</span><span class="token punctuation">(</span>_source <span class="token punctuation">${</span>sources_with_lower_optimization<span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">get_source_file_property</span><span class="token punctuation">(</span>_flags <span class="token punctuation">${</span>_source<span class="token punctuation">}</span> <span class="token property">COMPILE_FLAGS</span><span class="token punctuation">)</span>  <span class="token keyword">message</span><span class="token punctuation">(</span>STATUS <span class="token string">"Source <span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">_source</span><span class="token punctuation">}</span></span> has the following extra COMPILE_FLAGS: <span class="token interpolation"><span class="token punctuation">${</span><span class="token variable">_flags</span><span class="token punctuation">}</span></span>"</span><span class="token punctuation">)</span><span class="token keyword">endforeach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>set_source_files_properties(file PROPERTIES property value) </code>，它将属性设置为给定文件的传递值。</p><p><code>get_source_file_property(VAR file property)</code>，检索给定文件所需属性的值，并将其存储在CMake<code>VAR</code>变量中。</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CMake </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascript学习 基础</title>
      <link href="/2022/10/30/javascript-xue-xi-ji-chu/"/>
      <url>/2022/10/30/javascript-xue-xi-ji-chu/</url>
      
        <content type="html"><![CDATA[<p>Javascript基础知识</p><span id="more"></span><!-- markdownlint-disable MD041 MD002--><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/First_steps/A_first_splash">javascript mdn</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建个人博客</title>
      <link href="/2022/10/30/da-jian-ge-ren-bo-ke/"/>
      <url>/2022/10/30/da-jian-ge-ren-bo-ke/</url>
      
        <content type="html"><![CDATA[<p>博客制作教程：typora图床 + 域名与github部署 + 博客样式</p><span id="more"></span><h1 id="搭建个人博客"><a href="#搭建个人博客" class="headerlink" title="搭建个人博客"></a>搭建个人博客</h1><h2 id="写作工具"><a href="#写作工具" class="headerlink" title="写作工具"></a>写作工具</h2><p>阿里云 oss 对象存储 + PicGo + Typora =&gt; 自动上传图片的md编辑器</p><p>相信具体步骤很容易就能查到，我就不写了。</p><p><a href="https://zhuanlan.zhihu.com/p/344973958">https://zhuanlan.zhihu.com/p/344973958</a></p><h2 id="网站部署"><a href="#网站部署" class="headerlink" title="网站部署"></a>网站部署</h2><p>阿里云域名与解析 + Github Page + ssh =&gt; 网站部署方式</p><p>相信具体步骤很容易就能查到，我就只写几个注意点。</p><p><code>/blog/source</code>下新建文件<code>CNAME</code>，文件内容是自己的域名，例如<code>yilongdong.top</code></p><p>(域名解析A记录也能用，但是还是CNAME更好)</p><p>给github设置了ssh公钥后还需要获取token。第一次上传文件需要登陆，token就是密码。之后就免密了。</p><p>GitHub page开启https。</p><p><img src="https://yilongdong-blog.oss-cn-hangzhou.aliyuncs.com/img/image-20221030235353714.png" alt="image-20221030235353714"></p><p><a href="https://blog.51cto.com/u_15064642/2572458">https://blog.51cto.com/u_15064642/2572458</a></p><h2 id="博客样式"><a href="#博客样式" class="headerlink" title="博客样式"></a>博客样式</h2><p>Hexo + 闪烁之狐主题 + 手动配置 =&gt; 网站样式</p><p>相信具体步骤很容易就能查到，我就不写了。</p><p><a href="http://blinkfox.com/">http://blinkfox.com</a></p><p>其他样式</p><p><a href="https://hexo.io/themes/">https://hexo.io/themes/</a></p><h2 id="博客订阅"><a href="#博客订阅" class="headerlink" title="博客订阅"></a>博客订阅</h2><p>开启RSS后，可以在Fluent阅读器下订阅</p><p>添加订阅源</p><p>xxx/atom.xml</p><p><img src="https://yilongdong-blog.oss-cn-hangzhou.aliyuncs.com/img/image-20221030234415357.png" alt="image-20221030234415357"></p><p>开启提醒规则</p><p><img src="https://yilongdong-blog.oss-cn-hangzhou.aliyuncs.com/img/image-20221030234516346.png" alt="image-20221030234516346"></p><p>设置抓取频率</p><p><img src="https://yilongdong-blog.oss-cn-hangzhou.aliyuncs.com/img/image-20221030234555569.png" alt="image-20221030234555569"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
