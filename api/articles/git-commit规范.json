{"title":"git commit规范","uid":"488532bb3413d4814952662362babd82","slug":"git-commit规范","date":"2022-11-03T13:12:55.000Z","updated":"2022-11-03T14:01:10.110Z","comments":true,"path":"api/articles/git-commit规范.json","keywords":null,"cover":[],"content":"<p>点击阅读前文前, 首页能看到的文章的简短描述</p>\n<span id=\"more\"></span>\n<!-- markdownlint-disable MD041 MD002-->\n\n<p><a href=\"http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html\">http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html</a></p>\n<p>Commit message 都包括三个部分：Header，Body 和 Footer。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token operator\">&lt;</span>type<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>scope<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span>: <span class=\"token operator\">&lt;</span>subject<span class=\"token operator\">&gt;</span>\n// 空一行\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">&gt;</span>\n// 空一行\n<span class=\"token operator\">&lt;</span>footer<span class=\"token operator\">&gt;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Header\"><a href=\"#Header\" class=\"headerlink\" title=\"Header\"></a>Header</h2><p>Header部分只有一行，包括三个字段：<code>type</code>（必需）、<code>scope</code>（可选）和<code>subject</code>（必需）。</p>\n<p><strong>（1）type</strong></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>feat：新功能（feature）<br>fix：修补bug<br>docs：文档（documentation）<br>style： 格式（不影响代码运行的变动）<br>refactor：重构（即不是新增功能，也不是修改bug的代码变动）<br>test：增加测试<br>chore：构建过程或辅助工具的变动</p></blockquote>\n<p><strong>（2）scope</strong></p>\n<p><code>scope</code>用于说明 commit 影响的范围，比如数据层、控制层、视图层等等，视项目不同而不同。</p>\n<p><strong>（3）subject</strong></p>\n<p><code>subject</code>是 commit 目的的简短描述，不超过50个字符。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><ul>\n<li>以动词开头，使用第一人称现在时，比如<code>change</code>，而不是<code>changed</code>或<code>changes</code></li>\n<li>第一个字母小写</li>\n<li>结尾不加句号（<code>.</code>）</li>\n</ul></blockquote>\n<h2 id=\"Body\"><a href=\"#Body\" class=\"headerlink\" title=\"Body\"></a>Body</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">More detailed explanatory text, <span class=\"token keyword\">if</span> necessary.  Wrap it to \nabout <span class=\"token number\">72</span> characters or so. \n\nFurther paragraphs come after blank lines.\n\n- Bullet points are okay, too\n- Use a hanging indent<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<h2 id=\"Footer\"><a href=\"#Footer\" class=\"headerlink\" title=\"Footer\"></a>Footer</h2><ol>\n<li><p>关闭Issue</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 关闭单个</span>\nCloses <span class=\"token comment\">#234 </span>\n<span class=\"token comment\"># 关闭多个</span>\nCloses <span class=\"token comment\">#123, #245, #992</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n</li>\n<li><p>不兼容变动</p>\n</li>\n</ol>\n<p>感觉基本不用，用到看原文</p>\n<h2 id=\"Revert\"><a href=\"#Revert\" class=\"headerlink\" title=\"Revert\"></a>Revert</h2><p>还有一种特殊情况，如果当前 commit 用于撤销以前的 commit，则必须以<code>revert:</code>开头，后面跟着被撤销 Commit 的 Header。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">revert: feat<span class=\"token punctuation\">(</span>pencil<span class=\"token punctuation\">)</span>: <span class=\"token function\">add</span> <span class=\"token string\">'graphiteWidth'</span> option\n\nThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>Body部分的格式是固定的，必须写成<code>This reverts commit &lt;hash&gt;.</code>，其中的<code>hash</code>是被撤销 commit 的 SHA 标识符。</p>\n<p>如果当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change log 的<code>Reverts</code>小标题下面。</p>\n<h2 id=\"工具\"><a href=\"#工具\" class=\"headerlink\" title=\"工具\"></a>工具</h2><h3 id=\"Commitizen\"><a href=\"#Commitizen\" class=\"headerlink\" title=\"Commitizen\"></a>Commitizen</h3><p><a href=\"https://github.com/commitizen/cz-cli\">Commitizen</a>是一个撰写合格 Commit message 的工具。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token comment\"># 安装时遇到报错可以换淘宝源</span>\n<span class=\"token comment\"># npm config set registry https://registry.npm.taobao.org</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> commitizen<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>在项目路径下运行</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">commitizen init cz-conventional-changelog <span class=\"token parameter variable\">--save</span> --save-exact<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>以后，凡是用到<code>git commit</code>命令，一律改为使用<code>git cz</code>。</p>\n<p>如果要编写多行，使用<code>\\n</code> 换行。回车直接结束描述</p>\n<p><img src=\"https://yilongdong-blog.oss-cn-hangzhou.aliyuncs.com/img/image-20221103214049773.png\" alt=\"image-20221103214049773\"></p>\n<h3 id=\"standard-changelog\"><a href=\"#standard-changelog\" class=\"headerlink\" title=\"standard-changelog\"></a>standard-changelog</h3><p>根据commit生成changelog</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> standard-changelog\n<span class=\"token builtin class-name\">cd</span> project_dir\nstandard-changelog\n<span class=\"token comment\"># npm install -g conventional-changelog</span>\n<span class=\"token comment\"># cd my-project</span>\n<span class=\"token comment\"># conventional-changelog -p angular -i CHANGELOG.md -w</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><img src=\"https://yilongdong-blog.oss-cn-hangzhou.aliyuncs.com/img/image-20221103215039647.png\" alt=\"image-20221103215039647\"></p>\n<p><img src=\"https://yilongdong-blog.oss-cn-hangzhou.aliyuncs.com/img/image-20221103215056593.png\" alt=\"image-20221103215056593\"></p>\n<h2 id=\"修改git-commit信息\"><a href=\"#修改git-commit信息\" class=\"headerlink\" title=\"修改git commit信息\"></a>修改git commit信息</h2><p>1、将当前分支无关的工作状态进行暂存</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> stash<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>2、将 <code>HEAD</code> 移动到需要修改的 <code>commit</code> 上</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> rebase 9633cf0919^ <span class=\"token parameter variable\">--interactive</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>3、找到需要修改的 <code>commit</code> ,将首行的 <code>pick</code> 改成 <code>edit</code><br>4、开始着手解决你的 <code>bug</code><br>5、 <code>git add</code> 将改动文件添加到暂存<br>6、 <code>git commit –amend</code> 追加改动到提交<br>7、<code>git rebase –continue</code> 移动 <code>HEAD</code> 回最新的 <code>commit</code><br>8、恢复之前的工作状态</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> stash pop<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n","text":"点击阅读前文前, 首页能看到的文章的简短描述 http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html Commit message 都包括三个部分：Header，Body 和 Footer。 &l...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"git","slug":"git","count":3,"path":"api/tags/git.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Header\"><span class=\"toc-text\">Header</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Body\"><span class=\"toc-text\">Body</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Footer\"><span class=\"toc-text\">Footer</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Revert\"><span class=\"toc-text\">Revert</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B7%A5%E5%85%B7\"><span class=\"toc-text\">工具</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Commitizen\"><span class=\"toc-text\">Commitizen</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#standard-changelog\"><span class=\"toc-text\">standard-changelog</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9git-commit%E4%BF%A1%E6%81%AF\"><span class=\"toc-text\">修改git commit信息</span></a></li></ol>","author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"git rebase使用","uid":"4ba2934548c823e4c39b3ff3e4179b40","slug":"git-rebase使用","date":"2022-11-03T14:10:26.000Z","updated":"2022-11-03T14:25:50.659Z","comments":true,"path":"api/articles/git-rebase使用.json","keywords":null,"cover":[],"text":"git rebase法则：永远不要在公共分支上使用它。 合并主干提交到featuregit checkout feature git merge master # git merge feature master # 这样会在feature创建一个merge commit git...","link":"","photos":[],"count_time":{"symbolsCount":887,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"git","slug":"git","count":3,"path":"api/tags/git.json"}],"author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"git worktree使用","uid":"7a6e3dad18aab366d395a680cdf73288","slug":"git-worktree使用","date":"2022-11-03T08:24:51.000Z","updated":"2022-11-03T14:25:46.351Z","comments":true,"path":"api/articles/git-worktree使用.json","keywords":null,"cover":[],"text":"使用git worktree同时在多个 branch 上工作。 参考一些文章 git worktree add [-f] [--detach] [--checkout] [--lock [--reason &lt;string&gt;]] [-b &lt;new-branch&g...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"git","slug":"git","count":3,"path":"api/tags/git.json"}],"author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}