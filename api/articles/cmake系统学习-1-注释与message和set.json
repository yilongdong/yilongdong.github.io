{"title":"cmake系统学习:1 注释,message,set,include","uid":"b8d7042e48b8c930a1e0538bec9f2d5d","slug":"cmake系统学习-1-注释与message和set","date":"2022-11-07T11:26:22.000Z","updated":"2022-11-07T12:40:05.179Z","comments":true,"path":"api/articles/cmake系统学习-1-注释与message和set.json","keywords":null,"cover":null,"content":"<p>cmake基础</p>\n<span id=\"more\"></span>\n<!-- markdownlint-disable MD041 MD002-->\n\n<h1 id=\"注释-message-set-include\"><a href=\"#注释-message-set-include\" class=\"headerlink\" title=\"注释,message, set, include\"></a>注释,message, set, include</h1><h2 id=\"注释\"><a href=\"#注释\" class=\"headerlink\" title=\"注释\"></a>注释</h2><ol>\n<li>行注释</li>\n</ol>\n<pre class=\"line-numbers language-cmake\" data-language=\"cmake\"><code class=\"language-cmake\"><span class=\"token comment\"># 注释</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<ol start=\"2\">\n<li>括号注释(3.0之后)</li>\n</ol>\n<pre class=\"line-numbers language-cmake\" data-language=\"cmake\"><code class=\"language-cmake\"><span class=\"token comment\">#[[第一行注释</span>\n第二行注释]]\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"arg1\\n\"</span> <span class=\"token comment\">#[[注释内容]] \"arg2\")</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n\n\n<h2 id=\"message\"><a href=\"#message\" class=\"headerlink\" title=\"message\"></a>message</h2><h3 id=\"message日志级别\"><a href=\"#message日志级别\" class=\"headerlink\" title=\"message日志级别\"></a>message日志级别</h3><pre class=\"line-numbers language-cmake\" data-language=\"cmake\"><code class=\"language-cmake\"><span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>arg1 arg2 arg3<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>[&lt;mode<span class=\"token punctuation\">&gt;</span>] <span class=\"token string\">\"message text\"</span> ...<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># mode</span>\n<span class=\"token comment\">#[[</span>\nFATAL_ERROR 停止cmake运行和生成\nSEND_ERROR cmake继续运行，生成跳过\nWARNING 打印到stderr 会打印路径和行数\n<span class=\"token punctuation\">(</span>none<span class=\"token punctuation\">)</span> or NOTICE 打印到stderr\nSTATUS 项目用户可能感兴趣的信息，会加前缀--\nVERVOSE 针对项目用户的详细信息，会加前缀--，默认不显示\nDEBUG 开发人员使用的信息\nTRACE 非常低级实现细节的消息\n]]\n\n\ncmake -S . -B build --log-level=VERBOSE<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"message-report-checks插座库日志\"><a href=\"#message-report-checks插座库日志\" class=\"headerlink\" title=\"message report checks插座库日志\"></a>message report checks插座库日志</h3><pre class=\"line-numbers language-cmake\" data-language=\"cmake\"><code class=\"language-cmake\"><span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>&lt;checkState<span class=\"token punctuation\">&gt;</span> <span class=\"token string\">\"msg\"</span> ...<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 可以嵌套</span>\n<span class=\"token comment\"># checkState</span>\n<span class=\"token comment\">#[[</span>\nCHECK_START\nCHECK_PASS\nCHECK_FAIL\n]]\n\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<pre class=\"line-numbers language-cmake\" data-language=\"cmake\"><code class=\"language-cmake\">\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>CHECK_START <span class=\"token string\">\"find xxx\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 增加缩进</span>\n<span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">CMAKE_MESSAGE_INDENT</span> <span class=\"token string\">\"--\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 嵌套 1</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>CHECK_START <span class=\"token string\">\"find yyy\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>CHECK_PASS <span class=\"token string\">\"found\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 嵌套 2</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>CHECK_START <span class=\"token string\">\"find zzz\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>CHECK_FAIL <span class=\"token string\">\"not found\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 取消缩进</span>\n<span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span><span class=\"token variable\">CMAKE_MESSAGE_INDENT</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span>CHECK_FAIL <span class=\"token string\">\"not found\"</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"变量\"><a href=\"#变量\" class=\"headerlink\" title=\"变量\"></a>变量</h2><p>变量未设置返回空字符串, <code>${name}</code></p>\n<p>变量引用可以嵌套，并由内而外求值<code>${prefix${name}}</code></p>\n<p>变量名大小写敏感</p>\n<p><code>set</code>(), <code>unset()</code></p>\n<pre class=\"line-numbers language-cmake\" data-language=\"cmake\"><code class=\"language-cmake\"><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>VAR1 <span class=\"token string\">\"VAR1_value\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\<span class=\"token interpolation\"><span class=\"token punctuation\">${</span><span class=\"token variable\">VAR1</span><span class=\"token punctuation\">}</span></span>=<span class=\"token interpolation\"><span class=\"token punctuation\">${</span><span class=\"token variable\">VAR1</span><span class=\"token punctuation\">}</span></span>\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\<span class=\"token interpolation\"><span class=\"token punctuation\">${</span><span class=\"token variable\">VAR1</span><span class=\"token punctuation\">}</span></span>=<span class=\"token interpolation\"><span class=\"token punctuation\">${</span><span class=\"token variable\">VAR1</span><span class=\"token punctuation\">}</span></span>\"</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"cmake内建变量\"><a href=\"#cmake内建变量\" class=\"headerlink\" title=\"cmake内建变量\"></a>cmake内建变量</h3><h4 id=\"提供信息的变量\"><a href=\"#提供信息的变量\" class=\"headerlink\" title=\"提供信息的变量\"></a>提供信息的变量</h4><ol>\n<li><code>PROJECT_NAME</code> 项目名</li>\n</ol>\n<h4 id=\"改变行为的变量\"><a href=\"#改变行为的变量\" class=\"headerlink\" title=\"改变行为的变量\"></a>改变行为的变量</h4><ol>\n<li><code>BUILD_SHARED_LIBS</code></li>\n</ol>\n<h4 id=\"描述系统的变量\"><a href=\"#描述系统的变量\" class=\"headerlink\" title=\"描述系统的变量\"></a>描述系统的变量</h4><h4 id=\"控制构建过程的变量\"><a href=\"#控制构建过程的变量\" class=\"headerlink\" title=\"控制构建过程的变量\"></a>控制构建过程的变量</h4><p><code>CMAKE_COLOR_MAKEFILE</code>,默认<code>ON</code></p>\n<h3 id=\"cmake传递变量给C\"><a href=\"#cmake传递变量给C\" class=\"headerlink\" title=\"cmake传递变量给C++\"></a>cmake传递变量给C++</h3><ol>\n<li><p>CLI</p>\n<p><code>cmake .. -Dxx=yy -Dzz</code></p>\n</li>\n<li><p>cmake</p>\n<p><code>add_definitions(-Dxx=yy -Dzz)</code></p>\n<p>zz默认值为1</p>\n</li>\n</ol>\n<h2 id=\"include-make模块\"><a href=\"#include-make模块\" class=\"headerlink\" title=\"include make模块\"></a>include make模块</h2><pre class=\"line-numbers language-cmake\" data-language=\"cmake\"><code class=\"language-cmake\"><span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cmake/test.cmake\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cmake/xx.cmake\"</span> OPTIONAL<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 可选，文件不存在不报错</span>\n\n<span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cmake/xx.cmake\"</span> OPTIONAL RESULT_VARIABLE ret<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 获得是否找到的返回值</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RESULT_VARIABLE ret = <span class=\"token interpolation\"><span class=\"token punctuation\">${</span><span class=\"token variable\">ret</span><span class=\"token punctuation\">}</span></span>\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># ret = NOFOUND</span>\n\n<span class=\"token keyword\">include</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cmake/test.cmake\"</span> OPTIONAL RESULT_VARIABLE ret<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 获得是否找到的返回值</span>\n<span class=\"token keyword\">message</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RESULT_VARIABLE ret = <span class=\"token interpolation\"><span class=\"token punctuation\">${</span><span class=\"token variable\">ret</span><span class=\"token punctuation\">}</span></span>\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#ret = 导入的cmake文件路径</span>\n\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","text":"cmake基础 注释,message, set, include注释 行注释 # 注释 括号注释(3.0之后) #[[第一行注释 第二行注释]] message(\"arg1\\n\" #[[注释内容]] \"arg2\") messagemessage日志级别message(arg1 a...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"cmake","slug":"cmake","count":3,"path":"api/tags/cmake.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E9%87%8A-message-set-include\"><span class=\"toc-text\">注释,message, set, include</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E9%87%8A\"><span class=\"toc-text\">注释</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#message\"><span class=\"toc-text\">message</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#message%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB\"><span class=\"toc-text\">message日志级别</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#message-report-checks%E6%8F%92%E5%BA%A7%E5%BA%93%E6%97%A5%E5%BF%97\"><span class=\"toc-text\">message report checks插座库日志</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">变量</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#cmake%E5%86%85%E5%BB%BA%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">cmake内建变量</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8F%90%E4%BE%9B%E4%BF%A1%E6%81%AF%E7%9A%84%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">提供信息的变量</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%94%B9%E5%8F%98%E8%A1%8C%E4%B8%BA%E7%9A%84%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">改变行为的变量</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8F%8F%E8%BF%B0%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">描述系统的变量</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8E%A7%E5%88%B6%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B%E7%9A%84%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">控制构建过程的变量</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#cmake%E4%BC%A0%E9%80%92%E5%8F%98%E9%87%8F%E7%BB%99C\"><span class=\"toc-text\">cmake传递变量给C++</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#include-make%E6%A8%A1%E5%9D%97\"><span class=\"toc-text\">include make模块</span></a></li></ol></li></ol>","author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"cmake系统学习:2 常用功能","uid":"9f2413725e1494f52893c05d29ad7cbd","slug":"cmake系统学习-2-常用功能","date":"2022-11-07T12:41:22.000Z","updated":"2022-11-07T13:21:50.535Z","comments":true,"path":"api/articles/cmake系统学习-2-常用功能.json","keywords":null,"cover":null,"text":" cmake常用功能自动导入源文件和头文件 aux_source_directory aux_source_directory(\"./src\" SRCS) 把./src路径下所有文件存入SRCS变量中 file file(GLOB H_FILE \"${INCLUDE_PATH}/...","link":"","photos":[],"count_time":{"symbolsCount":658,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"cmake","slug":"cmake","count":3,"path":"api/tags/cmake.json"}],"author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"音视频很好的链接","uid":"a428701588e00e4dd38a37db22dfe9f5","slug":"音视频很好的链接","date":"2022-11-05T15:41:47.000Z","updated":"2022-11-05T15:55:29.838Z","comments":true,"path":"api/articles/音视频很好的链接.json","keywords":null,"cover":null,"text":"点击阅读前文前, 首页能看到的文章的简短描述 http://jhuster.com 卢俊 https://blog.51cto.com/ticktick/1956269 音视频入坑指南 https://zhuanlan.zhihu.com/p/51371354 播放器架构 ","link":"","photos":[],"count_time":{"symbolsCount":140,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"OpenGL","slug":"OpenGL","count":5,"path":"api/tags/OpenGL.json"},{"name":"ffmpeg","slug":"ffmpeg","count":5,"path":"api/tags/ffmpeg.json"}],"author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}