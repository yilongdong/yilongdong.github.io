{"title":"cmake系统学习:2.2 cmake主要语法 变量与缓存","uid":"c49836dd2f2f092644c9e09818c7b43e","slug":"cmake系统学习-2-2-cmake主要语法-变量与缓存","date":"2022-11-08T03:02:24.000Z","updated":"2022-11-08T03:35:25.773Z","comments":true,"path":"api/articles/cmake系统学习-2-2-cmake主要语法-变量与缓存.json","keywords":null,"cover":null,"content":"<p>点击阅读前文前, 首页能看到的文章的简短描述</p>\n<span id=\"more\"></span>\n<!-- markdownlint-disable MD041 MD002-->\n\n<h1 id=\"变量与缓存\"><a href=\"#变量与缓存\" class=\"headerlink\" title=\"变量与缓存\"></a>变量与缓存</h1><h2 id=\"缓存变量\"><a href=\"#缓存变量\" class=\"headerlink\" title=\"缓存变量\"></a>缓存变量</h2><h3 id=\"基本语法\"><a href=\"#基本语法\" class=\"headerlink\" title=\"基本语法\"></a>基本语法</h3><p>写到缓存文件里了</p>\n<p>只要缓存文件里有了就跳过，想要修改需要加<code>FORCE</code></p>\n<p><code>set(&lt;variable&gt; &lt;value&gt;... CACHE &lt;type&gt; &lt;docstring&gt; [FORCE])</code></p>\n<p><code>type</code>:</p>\n<p><code>BOOL</code>  <code>ON</code>/<code>OFF</code>选择框</p>\n<p><code>FILEPATH</code> 文件选择</p>\n<p><code>PATH</code> 目录选择</p>\n<p><code>STRING</code> 字符串</p>\n<p><code>INTERNAL</code> 内部变量，内部的全局缓存变量，不会开放给用户使用</p>\n<p><code>FORCE</code>强制修改，不加的话第一次设置后，第二次设置不会设置</p>\n<h3 id=\"缓存变量作用域\"><a href=\"#缓存变量作用域\" class=\"headerlink\" title=\"缓存变量作用域\"></a>缓存变量作用域</h3><p>普通变量的作用域是自身和子模块(<code>add_subdirectory</code>或<code>include</code>)</p>\n<p>缓存变量的作用域是全局的</p>\n<h2 id=\"ccmake\"><a href=\"#ccmake\" class=\"headerlink\" title=\"ccmake\"></a>ccmake</h2><p><code>ccmake</code>是在<code>cmake</code>生成之后，对<code>cmake</code>的<code>cache</code>进行修改，重新生成<code>makefile</code>文件。所以需要先执行<code>cmake</code>。</p>\n<h2 id=\"CACHE覆盖策略设置\"><a href=\"#CACHE覆盖策略设置\" class=\"headerlink\" title=\"CACHE覆盖策略设置\"></a>CACHE覆盖策略设置</h2><p>缓存变量和普通变量重名时覆盖策略</p>\n<pre class=\"line-numbers language-cmake\" data-language=\"cmake\"><code class=\"language-cmake\"><span class=\"token keyword\">cmake_policy</span><span class=\"token punctuation\">(</span>SET CMP0126 &lt;NEW|OLD<span class=\"token punctuation\">&gt;</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># NEW 不删除重名普通变量</span>\n<span class=\"token comment\"># OLD 删去重名的普通变量</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>访问cahce变量</p>\n<p><code>${NVAR}</code> 先找普通变量，再找cache变量。重名时默认是会删掉普通变量</p>\n<p><code>$CACHE{NVAR}</code>直接找cache变量</p>\n<h2 id=\"CMake内置缓存变量\"><a href=\"#CMake内置缓存变量\" class=\"headerlink\" title=\"CMake内置缓存变量\"></a>CMake内置缓存变量</h2><h2 id=\"D传递缓存变量\"><a href=\"#D传递缓存变量\" class=\"headerlink\" title=\"-D传递缓存变量\"></a>-D传递缓存变量</h2><p>在cmake生成前传递的变量都是缓存变量</p>\n","text":"点击阅读前文前, 首页能看到的文章的简短描述 变量与缓存缓存变量基本语法写到缓存文件里了 只要缓存文件里有了就跳过，想要修改需要加FORCE set(&lt;variable&gt; &lt;value&gt;... CACHE &lt;type&gt; &lt;docstrin...","link":"","photos":[],"count_time":{"symbolsCount":627,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"make","slug":"make","count":1,"path":"api/tags/make.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8F%98%E9%87%8F%E4%B8%8E%E7%BC%93%E5%AD%98\"><span class=\"toc-text\">变量与缓存</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%BC%93%E5%AD%98%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">缓存变量</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95\"><span class=\"toc-text\">基本语法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BC%93%E5%AD%98%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F\"><span class=\"toc-text\">缓存变量作用域</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ccmake\"><span class=\"toc-text\">ccmake</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#CACHE%E8%A6%86%E7%9B%96%E7%AD%96%E7%95%A5%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">CACHE覆盖策略设置</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#CMake%E5%86%85%E7%BD%AE%E7%BC%93%E5%AD%98%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">CMake内置缓存变量</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#D%E4%BC%A0%E9%80%92%E7%BC%93%E5%AD%98%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">-D传递缓存变量</span></a></li></ol></li></ol>","author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"2.3 cmake主要语法 属性与变量","uid":"5c48409009b67d9a464e12ac8db87536","slug":"2-3-cmake主要语法-属性与变量","date":"2022-11-08T03:36:06.000Z","updated":"2022-11-08T03:58:55.440Z","comments":true,"path":"api/articles/2-3-cmake主要语法-属性与变量.json","keywords":null,"cover":null,"text":"点击阅读前文前, 首页能看到的文章的简短描述 属性与变量属性与变量的区别属性是作用域为目标(target)的变量，但是也有全局属性。全局属性是一个没有缓存的全局变量。 属性语法set_propertyset_property(&lt;GLOBAL| DIRECTORY [&lt;...","link":"","photos":[],"count_time":{"symbolsCount":492,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"cmake","slug":"cmake","count":3,"path":"api/tags/cmake.json"}],"author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"cmake系统学习:2.1 cmake主要语法","uid":"a5750675f9146468dc57ef3297b265da","slug":"cmake系统学习-2-1-cmake主要语法","date":"2022-11-07T13:24:57.000Z","updated":"2022-11-08T03:01:26.314Z","comments":true,"path":"api/articles/cmake系统学习-2-1-cmake主要语法.json","keywords":null,"cover":null,"text":"if流程控制 if() elseif() else() endif() if 真假值if(&lt;constant&gt;) 0,OFF,NO,FALSE,N,IGNORE,NOTFOUND,空字符串,以-NOTFOUND结尾的字符串则为假 未定义变量为空字符串 环境变量总为假 ...","link":"","photos":[],"count_time":{"symbolsCount":876,"symbolsTime":"1 mins."},"categories":[{"name":"笔记","slug":"笔记","count":18,"path":"api/categories/笔记.json"}],"tags":[{"name":"OpenGL","slug":"OpenGL","count":5,"path":"api/tags/OpenGL.json"},{"name":"ffmpeg","slug":"ffmpeg","count":5,"path":"api/tags/ffmpeg.json"}],"author":{"name":"YiLongDong","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}